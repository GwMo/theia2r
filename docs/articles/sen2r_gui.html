<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Interactive execution • An R toolbox to find, download an preprocess Sentinel-2 data</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><meta property="og:title" content="Interactive execution">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-11080708-8"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-11080708-8');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sen2r</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.3.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">Home</a>
</li>
<li>
  <a href="../reference/index.html">Function reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ranghetti/sen2r/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Interactive execution</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ranghetti/sen2r/blob/master/vignettes/sen2r_gui.Rmd"><code>vignettes/sen2r_gui.Rmd</code></a></small>
      <div class="hidden name"><code>sen2r_gui.Rmd</code></div>

    </div>

    
    
<p>Launching the function</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(sen2r)
<span class="kw"><a href="../reference/sen2r.html">sen2r</a></span>()</code></pre></div>
<p>allows to open the main <span style="color:#5793dd;vertical-align:text-bottom;font-size:90%;font-weight:500;">sen</span><span style="color:#6a7077;vertical-align:baseline;font-size:115%;font-weight:850;">2</span><span style="color:#2f66d5;vertical-align:baseline;font-size:90%;font-weight:700;">r</span> GUI, with which the user is able to easily set the required processing parameters.</p>
<p>The GUI can be launched also with the function</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(sen2r)
<span class="kw"><a href="../reference/sen2r.html">sen2r</a></span>()</code></pre></div>
<p>The difference is that this function does not allow to directly start the processing, but only to set parameters and save a JSON parameter files (or return a list of parameters); moreover, <code><a href="../reference/s2_gui.html">s2_gui()</a></code> does not accept parameter values as arguments.</p>
<p>This page describes how to use the GUI in order to set your own processing chain.</p>
<div id="description-of-the-gui" class="section level2">
<h2 class="hasAnchor">
<a href="#description-of-the-gui" class="anchor"></a>Description of the GUI</h2>
<p>The GUI is composed of four main sheets:</p>
<p style="text-align:center;">
<a href="sen2r_gui_sheet1.jpg" target="_blank"> <img src="sen2r_gui_sheet1_small.png"></a> <a href="sen2r_gui_sheet2.jpg" target="_blank"> <img src="sen2r_gui_sheet2_small.png"></a> <a href="sen2r_gui_sheet3.jpg" target="_blank"> <img src="sen2r_gui_sheet3_small.png"></a> <a href="sen2r_gui_sheet4.jpg" target="_blank"> <img src="sen2r_gui_sheet4_small.png"></a>
</p>
<ol style="list-style-type: decimal">
<li>
<span style="background-color:#F2F4F4;"><a href="#product-selection"> <i class="fa fa-image"></i> Product selection </a></span> for settings about input SAFE images;</li>
<li>
<span style="background-color:#F2F4F4;"><a href="#spatio-temporal-selection"> <i class="fa fa-clone"></i> Spatio-temporal selection </a></span> to set the spatial extent and the temporal time window to use for SAFE querying and eventually to clip output images;</li>
<li>
<span style="background-color:#F2F4F4;"><a href="#processing-options"> <i class="fa fa-th"></i> Processing options </a></span> (visible only if the type of processing selected in the first sheet is “Processed spatial files”) for the settings relating to the spatial processing (clip, mask, set the geometry);</li>
<li>
<span style="background-color:#F2F4F4;"><a href="#spectral-indices-selection"> <i class="fa fa-calculator"></i> Spectral indices selection </a></span> (visible only if “Spectral indices” is checked as selected product in the first sheet) to choose output spectral indices.</li>
</ol>
<div id="product-selection" class="section level3">
<h3 class="hasAnchor">
<a href="#product-selection" class="anchor"></a><span style="background-color:#F2F4F4;"> <i class="fa fa-image"></i> Product selection </span>
</h3>
<div id="type-of-processing" class="section level4">
<h4 class="hasAnchor">
<a href="#type-of-processing" class="anchor"></a><span style="background-color:#F2F4F4;"> Type of processing </span>
</h4>
<p>The user can choose if his desider output is composed by SAFE archives (by choosing the first option) or by files in a custom format (with the second option).</p>
<p>In the first case, products are only downloaded and eventually corrected with <strong>sen2cor</strong>; the spatial processing is skipped (for this reason the sheet <span style="background-color:#F2F4F4;"><a href="#processing-options"> <i class="fa fa-th"></i> Processing options </a></span> is not available). In the second case, products can be downloaded, corrected with <strong>sen2cor</strong> and/or selected by an existing archive; they are used to perform spatial processing.</p>
</div>
<div id="select-products-and-sensors" class="section level4">
<h4 class="hasAnchor">
<a href="#select-products-and-sensors" class="anchor"></a><span style="background-color:#F2F4F4;"> Select products and sensors </span>
</h4>
<p>This box includes different options basing on the choice performed in the previous box <span style="background-color:#F2F4F4;"><a href="#type-of-processing"> Type of processing </a></span>.</p>
<p>Selecting <span style="background-color:#F2F4F4;"> Processed spatial files </span> the user can choose which products obtain as output (<span style="background-color:#F2F4F4;font-weight:bold;"> Select products </span>). Currenty it is possible to choose among these ones:</p>
<ul>
<li>
<span style="background-color:#F2F4F4;"> TOA (top-of-atmosphere) Reflectance </span>: multiband rasters (one per image), in which each of the 12 band corresponds to a Sentinel-2 Level-1C spectral bands (see <a href="https://earth.esa.int/web/sentinel/user-guides/sentinel-2-msi/resolutions/spatial" target="_blank">here</a> for details). Bands are ordered by wavelength (Band 1, Band 2, Band 3, etc.); Band 8 and Band 8A are mutually exclusives (Band 8 if used if the desired output resolution is lower than 20 metres; Band 8A otherwise).</li>
<li>
<span style="background-color:#F2F4F4;"> BOA (bottom-of-atmosphere) Surface Reflectance </span>: multiband rasters (one per image), in which each of the 11 band corresponds to a Sentinel-2 Level-2A spectral bands (the same as Level-1C ones, with the exception of Band 10, which is missing in Level-2A products).</li>
<li>
<span style="background-color:#F2F4F4;"> SCL (surface classification map) </span>: singleband rasters (one per image), corresponding to the classification maps generated by the Level-2A algorythm. Each pixel is automatically assigned to one of the following classes:
<ul>
<li>
<font style='\"family:monospace;background-color:#000000;color:white;\"'> 0 </font> No data</li>
<li>
<font style='\"family:monospace;background-color:#FF0000;color:white;\"'> 1 </font> Saturated or defective</li>
<li>
<font style='\"family:monospace;background-color:#424142;color:white;\"'> 2 </font> Dark area pixels</li>
<li>
<font style='\"family:monospace;background-color:#633400;color:white;\"'> 3 </font> Cloud shadows</li>
<li>
<font style='\"family:monospace;background-color:#29f329;color:black;\"'> 4 </font> Vegetation</li>
<li>
<font style='\"family:monospace;background-color:#ffff00;color:black;\"'> 5 </font> Bare soils</li>
<li>
<font style='\"family:monospace;background-color:#0000ff;color:white;\"'> 6 </font> Water</li>
<li>
<font style='\"family:monospace;background-color:#7b7d7b;color:white;\"'> 7 </font> Cloud (low probability)</li>
<li>
<font style='\"family:monospace;background-color:#bdbebd;color:black;\"'> 8 </font> Cloud (medium probability)</li>
<li>
<font style='\"family:monospace;background-color:#ffffff;color:black;\"'> 9 </font> Cloud (high probability)</li>
<li>
<font style='\"family:monospace;background-color:#63cbff;color:black;\"'> 10 </font> Thin cirrus</li>
<li>
<font style='\"family:monospace;background-color:#ff9aff;color:black;\"'> 11 </font> Snow</li>
</ul>
Notice that SCL is released at 20 metres resolution; so, if fthe user requires a lower non-native resolution, it will be rescaled. For details about the Scene Classification algorythm, see <a href="https://sentinel.esa.int/web/sentinel/technical-guides/sentinel-2-msi/level-2a/algorithm" target="_blank">this page</a>.</li>
<li>
<span style="background-color:#F2F4F4;"> TCI (true-color) RGB 8-bit image </span>: 24-bit raster images containing the true colour image of the Level-2A, as released in SAFE products. currently it can be produced only for shortname products (since oldname ones do not include it).</li>
<li>
<span style="background-color:#F2F4F4;"> Spectral indices</span>: singleband spectral indices, computed basing on BOA or TOA products. When this option is checked, the sheet <span style="background-color:#F2F4F4;"><a href="#spectral-indices-selection"> <i class="fa fa-calculator"></i> Spectral indices selection </a></span> appears and can be used to select the indices to be produced.</li>
</ul>
<p>Basing on the products which were selected, the GUI determines which SAFE levels (Level-1C, Level-2A or both) are required; they are shown in the list <span style="background-color:#F2F4F4;font-weight:bold;"> SAFE levels needed </span>. Basically, only Level-1C are required if the user chooses to produce only BOA reflectances, otherwise also Level-2A are required. Only Level-2A are required if the user chooses not to manually perform atmospheric corrections (see <span style="background-color:#F2F4F4;"><a href="#atmospheric-correction-options"> Atmospheric correction options </a></span>).</p>
<p>Finally, this box allows to limit the download and processing basing on the source sensor ( <span style="background-color:#F2F4F4;"> Sentinel-2A </span> or <span style="background-color:#F2F4F4;"> Sentinel-2B </span>), using the selector <span style="background-color:#F2F4F4;font-weight:bold;"> Select sensor </span>.</p>
<p>If <span style="background-color:#F2F4F4;"> Raw files in raw SAFE format </span> was selected as type of processing, the user can instead choose which SAFE level to produce (<span style="background-color:#F2F4F4;font-weight:bold;"> Select products </span>: <span style="background-color:#F2F4F4;"> Raw level-1C SAFE files </span>, <span style="background-color:#F2F4F4;"> Raw level-2A SAFE files </span> or both) and limit the download and processing basing on the source sensor, as in the previous case.</p>
</div>
<div id="safe-options" class="section level4">
<h4 class="hasAnchor">
<a href="#safe-options" class="anchor"></a><span style="background-color:#F2F4F4;"> SAFE options </span>
</h4>
<p>This box allows to set the options relating with SAFE products.</p>
<p>Two selectors (<span style="background-color:#F2F4F4;font-weight:bold;"> Directory for level-1C SAFE products </span> and <span style="background-color:#F2F4F4;font-weight:bold;"> Directory for level-2A SAFE products </span>) allows to set where to put SAFE Level-1C and Level-2A archives. The paths can be both written in the text boxes or selected with the buttons <span style="background-color:#F2F4F4;border:1px solid darkgrey;border-radius:5px;"> Select </span>. These two paths are used both for input and output SAFE products: new downloaded or produced SAFE are placed there, and existing SAFE are read.</p>
<p>The selector <span style="background-color:#F2F4F4;font-weight:bold;"> Download mode </span> allows to choose to work online (new SAFE products can be downloaded) or offline (only existing SAFE Level-1C products are used; Level-2A can be both existing or produced from corresponding existing Level-1C).</p>
<p>The selector <span style="background-color:#F2F4F4;font-weight:bold;"> Overwrite existing SAFE products? </span> allows to choose if existing SAFE should be considered: if so, the research of existing products is performed before downloading them; otherwise, the SAFE directories are used only as output directories, and eventual existing products are replaced by products downloaded or produced by <strong>sen2cor</strong>.</p>
<p>The selector <span style="background-color:#F2F4F4;font-weight:bold;"> Delete raw SAFE files after processing? </span>, available only in online mode, allows to delete SAFE products after the processing (allowing to save space on disk).</p>
</div>
<div id="atmospheric-correction-options" class="section level4">
<h4 class="hasAnchor">
<a href="#atmospheric-correction-options" class="anchor"></a><span style="background-color:#F2F4F4;"> Atmospheric correction options </span>
</h4>
<p>This box allows to set options related to <strong>sen2cor</strong>. It is visible only if Level-2A was selected or needed in the box <span style="background-color:#F2F4F4;"><a href="#select-products-and-sensors"> Select products and sensors </a></span>.</p>
<p>Currently, only one selector (<span style="background-color:#F2F4F4;font-weight:bold;"> Method to obtain level-2A corrected images </span>) is present, determining if (and when) <strong>sen2cor</strong> should be used.</p>
<ul>
<li>
<span style="background-color:#F2F4F4;"> Use only level-2A images available locally or online </span>: sen2cor is never used locally: level-2A products are used only if they are already available locally or if they can be downloaded from SciHub. This option is useful if sen2cor is not available locally, or if its use must be avoided at all.</li>
<li>
<span style="background-color:#F2F4F4;"> Use sen2cor only for level-2A products not available locally or online </span>: level-2A images are first of all searched locally or online; only for not available products (with corresponding level-1C images available) sen2cor is used to produce them. This option is useful to optimize time of processing (downloading of level-2A images is faster than producing them with sen2cor), and in most of the situations.</li>
<li>
<span style="background-color:#F2F4F4;"> Always correct level-1C images with sen2cor locally </span>: if level-2A images are not available locally, they are corrected applying sen2cor to their corresponding level-1C images. This option can be used to reduce internet traffic if a level-1C archive is already available, or if both level-1C and level-2A products are required for outputs.</li>
</ul>
</div>
</div>
<div id="spatio-temporal-selection" class="section level3">
<h3 class="hasAnchor">
<a href="#spatio-temporal-selection" class="anchor"></a><span style="background-color:#F2F4F4;"> <i class="fa fa-clone"></i> Spatio-temporal selection </span>
</h3>
<div id="temporal-parameters" class="section level4">
<h4 class="hasAnchor">
<a href="#temporal-parameters" class="anchor"></a><span style="background-color:#F2F4F4;"> Temporal parameters </span>
</h4>
<p>In this box the user can specify the temporal window for which products have to be found, downloaded or processed.</p>
<p>If the tool is run in Online mode (see <span style="background-color:#F2F4F4;"><a href="#safe-options"> SAFE options </a></span>) the selection of a temporal window is mandatory; instead, in Offline mode the user can still apply a temporal filter, but this is not mandatory (if no parameters are specified, all the SAFE images found in the SAFE directories are processed). For this reason, the first selector of the box (<span style="background-color:#F2F4F4;"> Use temporal filter? </span>) is visible only in Offline mode.</p>
<p>Next selectors of the box appear only if this selector was set to Yes.</p>
<p>In the selector <span style="background-color:#F2F4F4;font-weight:bold;"> Time interval </span> the user can specify the beginning and the ending date of the year (both writing them in the format YYYY-MM-DD or selecting them from the calendar). To search only a single date, it is possible to add the same value for both the beginning and the ending dates.</p>
<p>Finally, it is possible to select one of the following time periods:</p>
<ul>
<li>
<span style="background-color:#F2F4F4;"> Full </span>: the specified time window is entirely processed (e.g., specifying a range from 2016-05-01 to 2018-09-30 will return all the products in this time window which match the other parameters);</li>
<li>
<span style="background-color:#F2F4F4;"> Seasonal </span>: the specified time window is processed from the first year to the last year, in the seasonal time windows from the first Julian day to the second Julian day (e.g., specifying a range from 2016-05-01 to 2018-09-30 will return all the products from 2016-05-01 to 2016-09-30, from 2016-05-01 to 2016-09-30 and from 2017-05-01 to 2017-09-30, which also match the other parameters).</li>
</ul>
</div>
<div id="spatial-extent" class="section level4">
<h4 class="hasAnchor">
<a href="#spatial-extent" class="anchor"></a><span style="background-color:#F2F4F4;"> Spatial extent </span>
</h4>
<p>In this box the user can specify the spatial extent for which products have to be found, downloaded or processed. The same extent can be used for clipping the processed image (see <span style="background-color:#F2F4F4;"><a href="#processing-options"> <i class="fa fa-th"></i> Processing options </a></span>).</p>
<p>As seen for the time window, also in this case the selection of an extent is mandatory in Online mode, and optional in Offline mode; in Offline mode a selector <span style="background-color:#F2F4F4;font-weight=bold;"> Use spatial filter/clip? </span> is visible to allow the user to do this choice. In case the user set it to No, all the images founded in the SAFE directories matching the other parameters are processed, and the extent of output products corresponds to the extent of the selected tiles.</p>
<p>Next selectors of the box appear only if this selector was set to Yes.</p>
<p>The text field <span style="background-color:#F2F4F4;font-weight=bold;"> Extent name </span> allows to specify a name for the extent, which is used in the output file names. Notice that the name cannot contain spaces, points nor underscores, and that it cannot be a five-length string with the same structure of a tile ID (two numeric and three uppercase character values). These restrictions were added in order not to make confusion in the structure of file names.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#description-of-the-gui">Description of the GUI</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Luigi Ranghetti, Lorenzo Busetto.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
